---
interface FAQItem {
  question: string;
  answer: string;
}

interface Props {
  items: FAQItem[];
}

const { items } = Astro.props;
---

<section class="py-8">
  <h2 class="text-2xl font-bold text-gray-900 mb-6">Questions fr√©quentes</h2>
  <div class="space-y-4">
    {items.map((item, index) => (
      <div class="border border-gray-200 rounded-lg">
        <button
          class={`faq-question w-full text-left p-4 flex items-center justify-between hover:bg-gray-50 transition-colors`}
          data-index={index}
        >
          <span class="font-semibold text-gray-900">{item.question}</span>
          <svg
            class="faq-icon w-5 h-5 text-gray-500 transform transition-transform"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div
          class="faq-answer hidden p-4 pt-0 text-gray-700"
          data-index={index}
        >
          {item.answer}
        </div>
      </div>
    ))}
  </div>
</section>

<script>
  document.querySelectorAll('.faq-question').forEach((button) => {
    button.addEventListener('click', () => {
      const index = button.getAttribute('data-index');
      const answer = document.querySelector(
        `.faq-answer[data-index="${index}"]`
      );
      const icon = button.querySelector('.faq-icon');
      
      if (answer) {
        const isOpen = !answer.classList.contains('hidden');
        
        // Close all
        document.querySelectorAll('.faq-answer').forEach((a) => {
          a.classList.add('hidden');
        });
        document.querySelectorAll('.faq-icon').forEach((i) => {
          i.classList.remove('rotate-180');
        });
        
        // Toggle current
        if (!isOpen) {
          answer.classList.remove('hidden');
          if (icon) icon.classList.add('rotate-180');
        }
      }
    });
  });
</script>
